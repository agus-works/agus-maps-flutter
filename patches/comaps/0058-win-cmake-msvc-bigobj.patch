diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9d3038b..ba92c9e 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -86,6 +86,8 @@ endif()
 # Global compile options for all configurations.
 if (MSVC)
   add_compile_options(/utf-8)
+  # /bigobj needed for unity builds with many sections
+  add_compile_options(/bigobj)
   add_link_options(/INCREMENTAL:NO)
 else()
   add_compile_options(-ffast-math $<$<CXX_COMPILER_ID:GNU>:-Wno-psabi>)
@@ -98,7 +100,14 @@ if (PLATFORM_WIN)
 endif()
 
 # Built-in CMake configurations: Debug, Release, RelWithDebInfo, MinSizeRel
-if (${CMAKE_BUILD_TYPE} STREQUAL "Debug")
+# Use generator expressions for multi-config generators (Visual Studio, Xcode)
+if (CMAKE_CONFIGURATION_TYPES)
+  # Multi-config generator (Visual Studio, Xcode)
+  add_compile_definitions(
+    $<$<CONFIG:Debug>:DEBUG>
+    $<$<NOT:$<CONFIG:Debug>>:RELEASE>
+  )
+elseif (${CMAKE_BUILD_TYPE} STREQUAL "Debug")
   add_definitions(-DDEBUG)
   if (NOT MSVC)
     add_compile_options(-fno-omit-frame-pointer)
@@ -109,7 +118,8 @@ elseif (${CMAKE_BUILD_TYPE} MATCHES "Rel")
     add_compile_options(-O3 $<$<CXX_COMPILER_ID:GNU>:-flto=auto>)
   endif()
 else()
-  message(FATAL_ERROR "Unknown build type: " ${CMAKE_BUILD_TYPE})
+  message(WARNING "Unknown or empty build type: ${CMAKE_BUILD_TYPE}, defaulting to RELEASE")
+  add_definitions(-DRELEASE)
 endif()
 
 if (${CMAKE_BUILD_TYPE} STREQUAL "RelWithDebInfo")
